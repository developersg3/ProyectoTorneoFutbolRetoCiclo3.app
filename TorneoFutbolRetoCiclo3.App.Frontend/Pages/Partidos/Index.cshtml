@page
@model TorneoFutbolRetoCiclo3.App.Frontend.Pages.Partidos.IndexModel
@{
}
<form method="get">
    <div class="form-group">
		<label for="fecha_partido">Buscar</label>
        <input name="fecha_partido" id="fecha_partido" class="form-control" asp-for="@Model.fecha_partidoActual">
    </div>
	<button type="submit" class="btn btn-primary">Buscar</button>
</form>

<h1>Listado de Partidos</h1>
<a class="btn btn-primary" asp-page="./Create" >Nuevo Partido</a>
<table class="table">
	<thead>
		<tr>
			<th scope="col">Equipo local</th>
			<th scope="col">Vs</th>
			<th scope="col">Equipo visitante</th>
			<th scope="col">Goles Equipo visitante</th>
			<th scope="col">Goles Equipo local</th>
			<th scope="col">Fecha</th>
			<th scope="col">Hora</th>
			<th scope="col">Arbitro</th>
			<th scope="col">Estadio</th>
			<th scope="col">Id</th>
			<th scope="col">Acciones</th>
		</tr>
	</thead>
	</tbody>
	@foreach (var partido in Model.partidos)
	{
		<tr>
			@foreach(var equip in Model.equipos)
			{
				if(partido.cod_equipo_local == equip.EquipoId)
				{
					<td>@equip.nombre_equipo</td>
				}
			}

			<td>Vs</td>

			@foreach(var equip in Model.equipos)
			{
				if(partido.cod_equipo_vistante == equip.EquipoId)
				{
					<td>@equip.nombre_equipo</td>
				}
			}
			<td>@partido.goles_equipo_local</td>
			<td>@partido.goles_equipo_visitante</td>
			<td>@partido.fecha_partido</td>
			<td>@partido.hora_partido</td>
			@foreach(var arbit in Model.arbitros)
			{
				if(partido.ArbitroId == arbit.ArbitroId)
				{
					<td>@arbit.nombre_arbitro</td>
				}
			}

			@foreach(var estad in Model.estadios)
			{
				if(partido.EstadioId == estad.EstadioId)
				{
					<td>@estad.nombre_estadio</td>
				}
			}
			<td>@partido.PartidoId</td>
			<td>
				<a class="btn btn-secondary" asp-page="./Details" asp-route-id="@partido.PartidoId">Detalle</a>
				<a class="btn btn-secondary" asp-page="./Edit" asp-route-id="@partido.PartidoId">Editar</a>
			</td>
		</tr>
	}
	</tbody>
</table>